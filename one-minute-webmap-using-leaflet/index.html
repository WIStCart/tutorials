<!DOCTYPE html>
    <head>
        <title>Vanishing WI - One Minute</title>

        <!-- Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

        <!-- Data -->
        <script src="js/data.js"></script>
        <script src="js/photos.js"></script>

        <style>
            body {
                margin: 0;
            }
            #map {
                height: 100vh;
            }
            .leaflet-popup-content {
                width: 300px;
            }
            .leaflet-popup-content img {
                width: 100%;
            }
        </style>
    </head>
    <body>
        <!-- Map -->
        <div id="map"></div>

        <script>
            // Set max view
            const maxView = L.latLngBounds(
                L.latLng(43.2161, -88.5086),
                L.latLng(42.8286, -89.0455)
            );

            // Set initial map view
            const map = L.map('map',{
                minZoom: 11,
                maxZoom: 18,
                maxBounds: maxView
            }).setView([43.0224,-88.7770], 11);

            // OSM Basemap
            const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18
            }).addTo(map);

            // Add photos
            const photoStyle = {
                radius: 6,
                fillColor: "#000",
                color: "#000",
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            };

            L.geoJSON(photos, {
                pointToLayer: function (feature, latlng){
                    return L.circleMarker(latlng, photoStyle);
                },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup('<a href="photos/'+feature.properties.PHOTONAME+'" target="_blank"><img src="photos/'+feature.properties.PHOTONAME+'"/></a>');
                }
            }).addTo(map);

            // Add Unincs
            const legend = {
                "Uninc Found": "#4287f5",  //blue
                "Uninc Not Found": "#f54260"  //red 
            }

            L.geoJSON(data, {
                pointToLayer: function (feature, latlng){
                    return L.circleMarker(latlng, {
                        radius: 10,
                        fillColor: legend[feature.properties.STATUS],
                        color: "#000",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                    });
                },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup('<h1>'+feature.properties.NAME+'</h1><p>'+feature.properties.STATUS+'</p>');
                }
            }).addTo(map);

            
        </script>
    </body>
</html>